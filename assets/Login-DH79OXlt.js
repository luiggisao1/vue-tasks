import{m as a}from"./index-DxEENMiX.js";class c{session;constructor(){this.session=a.session}async login(s,e){try{const o=s.toLowerCase(),t=await this.session.post("login/",{username:o,password:e});return this.session.defaults.headers.common.Authorization=`Bearer ${t.data.access}`,localStorage.setItem("refresh",t.data.refresh),localStorage.setItem("access",t.data.access),t.data.user}catch{throw new Error("Login failed")}}async logout(){try{return(await this.session.post("logout/")).status===200}catch{return!1}}async refreshToken(){try{const s=localStorage.getItem("refresh"),e=await this.session.post("token/refresh/",{refresh:s});this.session.defaults.headers.common.Authorization=`Bearer ${e.data.access}`,localStorage.setItem("access",e.data.access)}catch{throw new Error("Token refresh failed")}}}export{c as L};
